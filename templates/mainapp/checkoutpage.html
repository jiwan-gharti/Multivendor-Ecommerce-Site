{% extends "mainapp/base.html" %}
{% load static %}

{% block title %}Checkout{% endblock title %}

{% block inlinecss %}
<style>
    .checkout_field_wrapper {
        position: relative;
    }

    .checkout_label {
        position: absolute;
        left: 1rem;
        top: -25px;
        transition: 1s;
    }

    .checkout_field_wrapper input:focus~.checkout_label {
        transform: translateY(40%);
        display: inline-block;
        width: 7rem;
        background: white;
        text-align: center;
    }

    .checkout_field_wrapper textarea:focus~.checkout_label {
        transform: translateY(50%);
        display: inline-block;
        width: 13rem;
        background: white;
        text-align: center;
    }

    .select_country {
        height: 2.5rem;
        outline: none;
        border-color: rgba(0, 0, 0, 0.2);
        border-radius: 5px;
    }

    .select_country:focus {
        border-color: lightblue;
        box-shadow: 0 0 2px 2px rgba(0, 123, 255, 0.25);
    }

    .checkout_label_select {
        transform: translateY(50%);
        display: inline-block;
        width: 5rem;
        background: white;
        text-align: center;
    }

    .checkout_field_wrapper select {
        outline: none;
        cursor: pointer;
    }
</style>

{% endblock inlinecss %}

{% block content %}


<div class="container">
    {% if messages %}
        <div class="mt-3 col-12 text-center">
            <ul class="messages">
                {% for message in messages %}
                 <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                    <strong>{{message}}
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                {% endfor %}
            </ul>
        </div>
    {% endif %}

    <div class="row shadow mb-5">
        <div class="col-md-7 col-sm-12 col-xs-12 mt-5 p-3 border-right">
            <h3 class='mb-sm-4'><strong>Billing Details</strong></h3>
            
            <form novalidate action="/checkout/" method="post" class="mb-5">
                {% csrf_token %}
                <div class="row m-0">
                    <div class="col-sm-6">
                        <div class="mt-sm-5 checkout_field_wrapper">
                            {% comment %} <input type="text" id="firstName" class="form-control"> {% endcomment %}
                            {{forms.first_name}}
                            <label class='checkout_label' for="firstName">First name</label>
                            <span class="errors">{{forms.first_name.errors|striptags}}</span>

                        </div>
                    </div>

                    <div class="col-sm-6">
                        <div class='mt-sm-5 mt-xs-5 checkout_field_wrapper'>
                            {{forms.last_name}}
                            <label class='checkout_label' for="lastName">Last Name</label>
                            <span class="errors">{{forms.last_name.errors|striptags}}</span>                    
                        </div>
                    </div>
                </div>

                <div class='row d-block ml-3  mt-xs-5'>
                    <div class='mt-sm-5 checkout_field_wrapper'>
                        {% comment %} <input type="text" id='email' class='form-control'> {% endcomment %}
                        {{forms.email}}
                        <label class='checkout_label' for="email">Email</label>
                        <span class="errors">{{forms.email.errors|striptags}}</span> 
                    </div>

                    <div class='mt-sm-5 checkout_field_wrapper'>
                        {% comment %} <input type="text" id='email' class='form-control'> {% endcomment %}
                        {{forms.phone_number}}
                        
                        <label class='checkout_label' for="email">Phone Number</label>
                        <label for="">{{forms.phone_number.help_text}}</label>
                        <span class="errors">{{forms.phone_number.errors|striptags}}</span> 
                    </div>

                    <div class='mt-sm-5 checkout_field_wrapper'>
                        {% comment %} <input type="text" id='email' class='form-control'> {% endcomment %}
                        {{forms.shipping_country}}
                        <label class='checkout_label' for="email">country</label>
                        <span class="errors">{{forms.shipping_country.errors|striptags}}</span> 
                    </div>


                    {% comment %} <div class='mt-sm-5 checkout_field_wrapper'>
                        {{forms.district}}
                        <label class='checkout_label' for="email">City/Town</label>
                    </div> {% endcomment %}


                    <div class='mt-sm-5 mt-xs-5 checkout_field_wrapper'>
                        {% comment %} <input type="text" id='Postcode / ZIP' class='form-control'> {% endcomment %}
                        {{forms.shipping_district}}
                        <label class='checkout_label' for="address">Address</label>
                        <span class="errors">{{forms.shipping_district.errors|striptags}}</span> 
                    </div>

                    <div class='mt-sm-5 mt-xs-5 checkout_field_wrapper'>
                        {% comment %} <input type="text" id='Postcode / ZIP' class='form-control'> {% endcomment %}
                        {{forms.shipping_address2}}
                        <label class='checkout_label' for="address">Street Name</label>
                        <span class="errors">{{forms.shipping_address2.errors|striptags}}</span> 
                    </div>

                    <div class='mt-sm-5 mt-xs-5 checkout_field_wrapper'>
                        {% comment %} <input type="text" id='address' class='form-control'> {% endcomment %}
                        {{forms.shipping_zip}}
                        <label class='checkout_label' for="Postcode / ZIP">Postcode/ZIP</label>
                        <span class="errors">{{forms.shipping_zip.errors|striptags}}</span> 
                    </div>

                    <div class='mt-sm-5 mt-xs-5 checkout_field_wrapper'>
                        {% comment %} <input type="text" id='address' class='form-control'> {% endcomment %}
                        {{forms.payment_option}}
                        <label class='checkout_label' for="Postcode / ZIP">Payment Method</label>
                        <span class="errors">{{forms.payment_option.errors|striptags}}</span> 
                    </div>
                    <button type="Submit" class="btn btn-primary btn-block mt-3">MAKE PURCHASE</button>

                    {% comment %} <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" name="set_default_shipping" id="set_default_shipping">
                        <label class="custom-control-label" for="set_default_shipping">Save as default shipping address</label>
                    </div> {% endcomment %}
                </div>
            </form>
        </div>

        <div class='col-md-4 col-sm-12 col-xs-12 mt-5 ml-5'>
            <h5 class='mt-4'><strong>The Total amount</strong> </h5>
            <ul class="list-group list-group-flush">
                <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 pb-0">
                    Temporary amount
                    <span>$25.98</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                    Shipping
                    <span>Gratis</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 mb-3">
                    <div>
                        <strong>The total amount of</strong>
                        <strong>
                            <p class="mb-0">(including VAT)</p>
                        </strong>
                    </div>
                    <span><strong>$53.98</strong></span>
                </li>
            </ul>
            {% comment %} <a href="{% url 'checkout' %}"><button type="button" class="btn btn-primary btn-block">MAKE PURCHASE</button></a> {% endcomment %}
            {% comment %} for discount section {% endcomment %}
            <div class="mb-3">
                <div class="pt-4">
                    <a class="dark-grey-text d-flex justify-content-between" data-toggle="collapse"
                        href="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
                        Add a discount code (optional)
                        <span><i class="fas fa-chevron-down pt-1"></i></span>
                    </a>
                    <div class="collapse" id="collapseExample">
                        <div class="mt-3">
                            <div class="md-form md-outline mb-0">
                                <input type="text" id="discount-code" class="form-control font-weight-light"
                                    placeholder="Enter discount code">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% comment %} end of the discount {% endcomment %}
        </div>
    </div>
</div>
{% endblock content %}